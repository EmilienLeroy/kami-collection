import"./vendor.981edf70.js";class p extends HTMLElement{static get tag(){throw new Error("Your component should have a tag !")}constructor({syncProps:e=!1}={}){super();this.syncProps=e,this.isObservable=!1,this.url=new URL(window.location.href),this.setProperties(),this.shadow=this.attachShadow({mode:"open"}),this.wrapper=document.createElement("div"),this.styleScope=document.createElement("style"),this.styleScope.type="text/css",this.render(),this.initComponent(),this.initEventListener()}initEventListener(){}setProp(e,t){e&&t&&this.props&&typeof this.props=="object"&&(this.props[e]=t)}getProp(e){if(this.props&&typeof this.props=="object")return this.props[e]}attributeChangedCallback(e,t,s){this.isObservable&&t!==s&&this.props&&(this.props[e]=s)}observe(e){return this.isObservable=!0,new Proxy(e,{get:(t,s)=>t[s],set:(t,s,r)=>(t[s]=r,this.syncProps&&this.setAttribute(s,r),this.render(),this.initEventListener(),this.propChangedCallback&&this.propChangedCallback(s,r),!0)})}render(){return this.wrapper.innerHTML=this.renderHtml(),this.styleScope.textContent=this.renderStyle(),this.bindAttributes(this.wrapper),this}initComponent(){this.shadow.appendChild(this.styleScope),this.shadow.appendChild(this.wrapper)}createElement(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}toBoolean(e){return{true:!0,false:!1}[e]}bindAttributes(e){e.querySelectorAll("*").forEach(t=>{Array.from(t.attributes).forEach(s=>{s.nodeName.startsWith("bind:")&&this.addBindsListener(t,s)})})}addBindsListener(e,t){if(t.nodeValue){const s=new Event(t.nodeName.split(":")[1]);t.nodeValue.split(";").forEach(r=>{this.bindListener(e,r.replace(/ /g,""),s)})}}bindListener(e,t,s){if(t){const r=this.parseFunctionName(t),n=this.parseParams(t),i=this[r].bind(this);if(typeof i=="function")e.addEventListener(s.type,o=>{if(n){i(...n,o);return}i(o)});else throw new TypeError(`${t} is not a function !`)}}parseParams(e){const t=/\(\s*([^)]+?)\s*\)/.exec(e);return t&&t[1]?t[1].split(/\s*,\s*/):null}parseFunctionName(e){return e.split("(")[0]}getUrlParam(e){return this.url.searchParams.get(e)}setUrlParam(e,t){let s=!1;return t.toString()!==""&&(this.getUrlParam(e)?this.url.searchParams.set(e,t):this.url.searchParams.append(e,t),s=!0),t.toString()===""&&this.getUrlParam(e)&&!s&&(this.url.searchParams.delete(e),s=!0),s===!0&&window.history.pushState({},"",this.url.toString()),this}}export{p as K};
