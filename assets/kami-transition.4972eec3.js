var E=Object.defineProperty,O=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var g=(s,t,i)=>t in s?E(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i,c=(s,t)=>{for(var i in t||(t={}))w.call(t,i)&&g(s,i,t[i]);if(m)for(var i of m(t))S.call(t,i)&&g(s,i,t[i]);return s},y=(s,t)=>O(s,I(t));import{s as v,$ as A,i as f,e as l}from"./vendor.981edf70.js";function x(s="0",t="1"){return[{opacity:s},{opacity:t}]}function $(s="0",t="1"){return[{transform:`scale(${s})`,opacity:0},{transform:`scale(${t})`,opacity:1}]}function b(s="50",t="0"){return[{transform:`translateY(${s}px)`,opacity:0},{opacity:0,offset:.3},{transform:`translateY(${t}px)`,opacity:1}]}function H(s="50",t="0"){return[{transform:`translateX(${s}px)`,opacity:0},{opacity:0,offset:.3},{transform:`translateX(${t}px)`,opacity:1}]}const u={fade:x,scale:$,"slide-x":H,"slide-y":b};var _=Object.defineProperty,z=Object.getOwnPropertyDescriptor,e=(s,t,i,r)=>{for(var n=r>1?void 0:r?z(t,i):t,h=s.length-1,a;h>=0;h--)(a=s[h])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&_(t,i,n),n};class o extends v{constructor(){super(...arguments);this.duration=500,this.delay=0,this.easing="ease",this.transition="fade"}static get tag(){return"kami-transition"}get options(){return{duration:this.duration,delay:this.delay,easing:this.easing}}get single(){return this.getElementSlot(this.child)}get in(){return this.getElementSlot(this.childIn)}get out(){return this.getElementSlot(this.childOut)}getElementSlot(t){const i=t==null?void 0:t.assignedElements({flatten:!0})[0];if(!!i)return i}updated(t){t.get("show")!==void 0&&(this.cancelAnimation(this.animation),this.cancelAnimation(this.animationIn),this.cancelAnimation(this.animationOut),this.updateHostSize(this.in),this.updateHostSize(this.out),this.toggle(this.show))}toggle(t){t&&this.single&&this.display(),t&&this.in&&this.out&&this.displayInOut(),!t&&this.single&&this.hide(),!t&&this.in&&this.out&&this.hideInOut()}firstUpdated(){if(this.single&&(this.in||this.out))throw new Error("In-out does not work with default slot");if(this.in&&!this.out)throw new Error("Missing out slot");if(this.out&&!this.in)throw new Error("Missing in slot");this.show&&this.single&&(this.displayEl(this.child),this.state=!0),!this.show&&this.in&&this.out&&(this.hideEl(this.childIn),this.displayEl(this.childOut)),this.show&&this.in&&this.out&&(this.displayEl(this.childIn),this.hideEl(this.childOut),this.state=!0),this.updateHostSize(this.in),this.updateHostSize(this.out),this.style.display="block",this.style.opacity="1"}runAnimation({child:t,el:i,keyframes:r,options:n,show:h=!0}){h&&this.displayEl(t);const a=i.animate(r,n);return a.onfinish=()=>{h?this.displayEl(t):this.hideEl(t)},a}runAnimationInOut({childIn:t,childOut:i,inEl:r,outEl:n,keyframes:h,options:a}){this.displayEl(t);const d=r.animate(h,a),p=n.animate(h,y(c({},a),{direction:"reverse"}));return d.onfinish=()=>this.displayEl(t),d.oncancel=()=>this.displayEl(t),p.onfinish=()=>this.hideEl(i),p.oncancel=()=>this.hideEl(i),{animationIn:d,animationOut:p}}display(){!this.child||!this.single||(this.animation=this.runAnimation({child:this.child,el:this.single,keyframes:u[this.transition](this.from,this.to),options:this.options}),this.state=!0)}displayInOut(){if(!this.childIn||!this.childOut||!this.in||!this.out)return;const{animationIn:t,animationOut:i}=this.runAnimationInOut({childIn:this.childIn,childOut:this.childOut,inEl:this.in,outEl:this.out,keyframes:u[this.transition](this.from,this.to),options:this.options});this.animationIn=t,this.animationOut=i,this.state=!0}hide(){!this.child||!this.single||(this.animation=this.runAnimation({child:this.child,el:this.single,keyframes:u[this.transition](this.from,this.to),show:!1,options:y(c({},this.options),{direction:"reverse"})}),this.state=!1)}hideInOut(){if(!this.childIn||!this.childOut||!this.in||!this.out)return;const{animationIn:t,animationOut:i}=this.runAnimationInOut({childIn:this.childOut,childOut:this.childIn,inEl:this.out,outEl:this.in,keyframes:u[this.transition](this.from,this.to),options:this.options});this.animationIn=i,this.animationOut=t,this.state=!1}updateHostSize(t){!t||!t.clientWidth&&!t.clientHeight||(this.style.width=`${t.clientWidth}px`,this.style.height=`${t.clientHeight}px`)}cancelAnimation(t){!t||t.playState==="finished"||t.cancel()}displayEl(t){!t||(t.style.display="inherit")}hideEl(t){!t||(t.style.display="none")}render(){return A`
      <slot id="single" style="display: none;"></slot>
      <slot id="in" name="in" style="display: none; position: absolute;"></slot>
      <slot id="out" name="out" style="display: none; position: absolute;"></slot>
    `}}e([f("#single")],o.prototype,"child",2);e([f("#in")],o.prototype,"childIn",2);e([f("#out")],o.prototype,"childOut",2);e([l({converter:s=>s==="true"})],o.prototype,"show",2);e([l({type:String})],o.prototype,"from",2);e([l({type:String})],o.prototype,"to",2);e([l({type:Number})],o.prototype,"duration",2);e([l({type:Number})],o.prototype,"delay",2);e([l({type:String})],o.prototype,"easing",2);e([l({type:String})],o.prototype,"transition",2);export{o as K};
