var l=Object.defineProperty;var p=(o,e,t)=>e in o?l(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var n=(o,e,t)=>(p(o,typeof e!="symbol"?e+"":e,t),t);import"./vendor.2a8d4232.js";const c=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}};c();class f extends HTMLElement{constructor({syncProps:e=!1}={}){super();n(this,"url");n(this,"shadow");n(this,"wrapper");n(this,"styleScope");n(this,"isObservable");n(this,"syncProps");n(this,"props");this.syncProps=e,this.isObservable=!1,this.url=new URL(window.location.href),this.setProperties(),this.shadow=this.attachShadow({mode:"open"}),this.wrapper=document.createElement("div"),this.styleScope=document.createElement("style"),this.styleScope.type="text/css",this.render(),this.initComponent(),this.initEventListener()}static get tag(){throw new Error("Your component should have a tag !")}initEventListener(){}setProp(e,t){e&&t&&this.props&&typeof this.props=="object"&&(this.props[e]=t)}getProp(e){if(this.props&&typeof this.props=="object")return this.props[e]}attributeChangedCallback(e,t,r){this.isObservable&&t!==r&&this.props&&(this.props[e]=r)}observe(e){return this.isObservable=!0,new Proxy(e,{get:(t,r)=>t[r],set:(t,r,s)=>(t[r]=s,this.syncProps&&this.setAttribute(r,s),this.render(),this.initEventListener(),this.propChangedCallback&&this.propChangedCallback(r,s),!0)})}render(){return this.wrapper.innerHTML=this.renderHtml(),this.styleScope.textContent=this.renderStyle(),this.bindAttributes(this.wrapper),this}initComponent(){this.shadow.appendChild(this.styleScope),this.shadow.appendChild(this.wrapper)}createElement(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}toBoolean(e){return{true:!0,false:!1}[e]}bindAttributes(e){e.querySelectorAll("*").forEach(t=>{Array.from(t.attributes).forEach(r=>{r.nodeName.startsWith("bind:")&&this.addBindsListener(t,r)})})}addBindsListener(e,t){if(t.nodeValue){const r=new Event(t.nodeName.split(":")[1]);t.nodeValue.split(";").forEach(s=>{this.bindListener(e,s.replace(/ /g,""),r)})}}bindListener(e,t,r){if(t){const s=this.parseFunctionName(t),i=this.parseParams(t),a=this[s].bind(this);if(typeof a=="function")e.addEventListener(r.type,h=>{if(i){a(...i,h);return}a(h)});else throw new TypeError(`${t} is not a function !`)}}parseParams(e){const t=/\(\s*([^)]+?)\s*\)/.exec(e);return t&&t[1]?t[1].split(/\s*,\s*/):null}parseFunctionName(e){return e.split("(")[0]}getUrlParam(e){return this.url.searchParams.get(e)}setUrlParam(e,t){let r=!1;return t.toString()!==""&&(this.getUrlParam(e)?this.url.searchParams.set(e,t):this.url.searchParams.append(e,t),r=!0),t.toString()===""&&this.getUrlParam(e)&&!r&&(this.url.searchParams.delete(e),r=!0),r===!0&&window.history.pushState({},"",this.url.toString()),this}}export{f as K};
